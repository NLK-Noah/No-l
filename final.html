<!DOCTYPE html>
<html>
<head>
  <link rel="icon" type="image/png" href="static/naima.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=Chango&display=swap" rel="stylesheet">
  <title>Le Festin d'Hiver</title>

  <!-- CSS -->
  <link rel="stylesheet" href="static/bac.css">
  
</head>
<body>
    <h1>F√©l√©citation voici tes r√©ponses:</h1>
    <li>Animal:</li>
    <p id="animalRep"></p>
    <li>Pays:</li>
    <p id="paysRep"></p>
    <li>Objet:</li>
    <p id="objetRep"></p>
    <li>M√©tier:</li>
    <p id="metierRep"></p>
    <li>Aliment:</li>
    <p id="alimentRep"></p>
    <button onclick="location.href='jeux.html'">Retour au menu</button>
    <script type="module">
  // --- IMPORT FIREBASE ---
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, query, where, getDocs } 
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // --- CONFIG FIREBASE (√† remplacer par la tienne) ---
  const firebaseConfig = {
    apiKey: "AIzaSyBVQh_y9U1D5gA7BmCCFJgOlEPlUAogxV8",
    authDomain: "santa-secret-3c1f4.firebaseapp.com",
    projectId: "santa-secret-3c1f4",
    storageBucket: "santa-secret-3c1f4.firebasestorage.app",
    messagingSenderId: "238129661360",
    appId: "1:238129661360:web:d6ccb73539dc67d9f68275"
  };

  // Init Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // üî• R√©cup√©ration du nom dans le localStorage
  const playerName = localStorage.getItem("username");


  if (!playerName) {
    alert("Aucun joueur trouv√© dans le localStorage.");
  } else {
    // üî• R√©cup√©rer le document Firestore correspondant
    async function getUserReponses() {
      const q = query(
        collection(db, "responses"),
        where("user", "==", playerName)
      );

      const querySnapshot = await getDocs(q);

      if (querySnapshot.empty) {
        alert("Aucune r√©ponse trouv√©e pour " + playerName);
        return;
      }

      // Normalement un seul document
      const doc = querySnapshot.docs[0].data();
      console.log("R√©ponses r√©cup√©r√©es:", doc);

      // üî• Affichage dans la page
      document.getElementById("animalRep").textContent = doc.animal || "Aucune r√©ponse";
      document.getElementById("objetRep").textContent = doc.objet || "Aucune r√©ponse";
      document.getElementById("metierRep").textContent = doc.metier || "Aucune r√©ponse";
      document.getElementById("alimentRep").textContent = doc.aliment || "Aucune r√©ponse";
      document.getElementById("paysRep").textContent = doc.pays|| "Aucune r√©ponse";
    }

    getUserReponses();
  }
</script>
</body>
</html>